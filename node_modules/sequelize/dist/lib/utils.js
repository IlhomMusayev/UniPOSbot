"use strict";var b=Object.defineProperty;var S=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var I=(e,r,n)=>r in e?b(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,q=(e,r)=>{for(var n in r||(r={}))C.call(r,n)&&I(e,n,r[n]);if(S)for(var n of S(r))W.call(r,n)&&I(e,n,r[n]);return e};var i=(e,r)=>b(e,"name",{value:r,configurable:!0});const u=require("./data-types"),N=require("./sql-string"),f=require("lodash"),x=require("lodash/_baseIsNative"),U=require("uuid").v1,$=require("uuid").v4,K=require("./operators"),V=new Set(Object.values(K));let l=require("inflection");exports.classToInvokable=require("./utils/class-to-invokable").classToInvokable,exports.joinSQLFragments=require("./utils/join-sql-fragments").joinSQLFragments;function H(e){l=e}i(H,"useInflection"),exports.useInflection=H;function L(e,r){let n=e;return r&&(n=p(e)),n}i(L,"camelizeIf"),exports.camelizeIf=L;function R(e,r){let n=e;return r&&(n=h(e)),n}i(R,"underscoredIf"),exports.underscoredIf=R;function J(e){const r=typeof e;return r==="string"||r==="number"||r==="boolean"}i(J,"isPrimitive"),exports.isPrimitive=J;function Q(e,r){return f.mergeWith(e,r,(n,t)=>{if(!f.isPlainObject(n)&&n!==void 0)return f.isFunction(n)&&x(n)&&t||n})}i(Q,"mergeDefaults"),exports.mergeDefaults=Q;function T(){const e={};for(const r of arguments)f.forOwn(r,(n,t)=>{n!==void 0&&(e[t]?f.isPlainObject(n)&&f.isPlainObject(e[t])?e[t]=T(e[t],n):Array.isArray(n)&&Array.isArray(e[t])?e[t]=n.concat(e[t]):e[t]=n:e[t]=n)});return e}i(T,"merge"),exports.merge=T;function Z(e,r,n,t){return e.slice(0,r)+t+e.slice(r+n)}i(Z,"spliceStr"),exports.spliceStr=Z;function p(e){return e.trim().replace(/[-_\s]+(.)?/g,(r,n)=>n.toUpperCase())}i(p,"camelize"),exports.camelize=p;function h(e){return l.underscore(e)}i(h,"underscore"),exports.underscore=h;function B(e){return l.singularize(e)}i(B,"singularize"),exports.singularize=B;function G(e){return l.pluralize(e)}i(G,"pluralize"),exports.pluralize=G;function X(e,r){const n=null;return N.format(e[0],e.slice(1),n,r)}i(X,"format"),exports.format=X;function Y(e,r,n){const t=null;return N.formatNamedParameters(e,r,t,n)}i(Y,"formatNamedParameters"),exports.formatNamedParameters=Y;function j(e,r){return e=e||{},f.cloneDeepWith(e,n=>{if(!(Array.isArray(n)||f.isPlainObject(n))){if(r||typeof n=="object")return n;if(n&&typeof n.clone=="function")return n.clone()}})}i(j,"cloneDeep"),exports.cloneDeep=j;function v(e,r){return e.attributes&&Array.isArray(e.attributes)&&(e.attributes=r._injectDependentVirtualAttributes(e.attributes),e.attributes=e.attributes.filter(n=>!r._virtualAttributes.has(n))),O(e,r),e}i(v,"mapFinderOptions"),exports.mapFinderOptions=v;function O(e,r){return Array.isArray(e.attributes)&&(e.attributes=e.attributes.map(n=>typeof n!="string"?n:r.rawAttributes[n]&&n!==r.rawAttributes[n].field?[r.rawAttributes[n].field,n]:n)),e.where&&f.isPlainObject(e.where)&&(e.where=g(e.where,r)),e}i(O,"mapOptionFieldNames"),exports.mapOptionFieldNames=O;function g(e,r){return e&&(e=j(e),d(e).forEach(n=>{const t=r.rawAttributes[n];t&&t.field!==t.fieldName&&(e[t.field]=e[n],delete e[n]),f.isPlainObject(e[n])&&!(t&&(t.type instanceof u.HSTORE||t.type instanceof u.JSON))&&(e[n]=O({where:e[n]},r).where),Array.isArray(e[n])&&e[n].forEach((s,c)=>{f.isPlainObject(s)&&(e[n][c]=g(s,r))})})),e}i(g,"mapWhereFieldNames"),exports.mapWhereFieldNames=g;function M(e,r,n){const t={};for(const s of r)e[s]!==void 0&&!n._virtualAttributes.has(s)&&(n.rawAttributes[s]&&n.rawAttributes[s].field&&n.rawAttributes[s].field!==s?t[n.rawAttributes[s].field]=e[s]:t[s]=e[s]);return t}i(M,"mapValueFieldNames"),exports.mapValueFieldNames=M;function k(e){return typeof e=="string"&&e[0]==="$"&&e[e.length-1]==="$"}i(k,"isColString"),exports.isColString=k;function ee(e){return e.some(r=>f.isPlainObject(r)||r instanceof w)}i(ee,"canTreatArrayAsAnd"),exports.canTreatArrayAsAnd=ee;function ne(e,r){return e.toLowerCase()<r.toLowerCase()?e+r:r+e}i(ne,"combineTableNames"),exports.combineTableNames=ne;function re(e,r){if(typeof e=="function"){const n=e();return n instanceof u.ABSTRACT?n.toSql():n}return e instanceof u.UUIDV1?U():e instanceof u.UUIDV4?$():e instanceof u.NOW?D(r):Array.isArray(e)?e.slice():f.isPlainObject(e)?q({},e):e}i(re,"toDefaultValue"),exports.toDefaultValue=re;function te(e){return e===void 0||e instanceof u.NOW||e instanceof u.UUIDV1||e instanceof u.UUIDV4?!1:typeof e!="function"}i(te,"defaultValueSchemable"),exports.defaultValueSchemable=te;function ie(e,r,n){let t=e;if(n=n||{},n.allowNull=n.allowNull||[],r){const s={};f.forIn(e,(c,o)=>{(n.allowNull.includes(o)||o.endsWith("Id")||c!=null)&&(s[o]=c)}),t=s}return t}i(ie,"removeNullValuesFromHash"),exports.removeNullValuesFromHash=ie;const se=new Set(["mariadb","mysql","postgres","sqlite","mssql"]);function D(e){const r=new Date;return se.has(e)||r.setMilliseconds(0),r}i(D,"now"),exports.now=D;const A="`";exports.TICK_CHAR=A;function fe(e,r){return r=r||A,r+P(e,r)+r}i(fe,"addTicks"),exports.addTicks=fe;function P(e,r){return r=r||A,e.replace(new RegExp(r,"g"),"")}i(P,"removeTicks"),exports.removeTicks=P;function ce(e){if(!f.isPlainObject(e))return e;const r={};function n(t,s){return Object.keys(t).forEach(c=>{const o=s?`${s}.${c}`:c;typeof t[c]=="object"&&t[c]!==null?n(t[c],o):r[o]=f.get(t,c)}),r}return i(n,"flattenObject"),n(e,void 0)}i(ce,"flattenObjectDeep"),exports.flattenObjectDeep=ce;class a{}i(a,"SequelizeMethod"),exports.SequelizeMethod=a;class m extends a{constructor(r,n){super();this.fn=r,this.args=n}clone(){return new m(this.fn,this.args)}}i(m,"Fn"),exports.Fn=m;class z extends a{constructor(r,...n){super();n.length>0&&(r=n),this.col=r}}i(z,"Col"),exports.Col=z;class E extends a{constructor(r,n,t){super();this.val=r,this.type=(n||"").trim(),this.json=t||!1}}i(E,"Cast"),exports.Cast=E;class F extends a{constructor(r){super();this.val=r}}i(F,"Literal"),exports.Literal=F;class _ extends a{constructor(r,n){super();f.isObject(r)?this.conditions=r:(this.path=r,n&&(this.value=n))}}i(_,"Json"),exports.Json=_;class w extends a{constructor(r,n,t){super();t===void 0&&(t=n,n="="),this.attribute=r,this.comparator=n,this.logic=t}}i(w,"Where"),exports.Where=w;function y(e){return Object.getOwnPropertySymbols(e).filter(r=>V.has(r))}i(y,"getOperators"),exports.getOperators=y;function d(e){return y(e).concat(Object.keys(e))}i(d,"getComplexKeys"),exports.getComplexKeys=d;function ue(e){return Array.isArray(e)?e.length:d(e).length}i(ue,"getComplexSize"),exports.getComplexSize=ue;function ae(e){return!!e&&f.isEmpty(e)&&y(e).length===0}i(ae,"isWhereEmpty"),exports.isWhereEmpty=ae;function oe(e,r){return`enum_${e}_${r}`}i(oe,"generateEnumName"),exports.generateEnumName=oe;function le(e){const r=new Object;return Object.keys(e).forEach(n=>{r[p(n)]=e[n]}),r}i(le,"camelizeObjectKeys"),exports.camelizeObjectKeys=le;function me(e,...r){return e=Object(e),r.forEach(n=>{n&&(n=Object(n),d(n).forEach(t=>{const s=e[t];(s===void 0||f.eq(s,Object.prototype[t])&&!Object.prototype.hasOwnProperty.call(e,t))&&(e[t]=n[t])}))}),e}i(me,"defaults"),exports.defaults=me;function de(e,r){if(r.tableName&&(r=r.tableName),!Object.prototype.hasOwnProperty.call(e,"name")){const n=e.fields.map(t=>typeof t=="string"?t:t.name||t.attribute);e.name=h(`${r}_${n.join("_")}`)}return e}i(de,"nameIndex"),exports.nameIndex=de;function pe(e,r){return e.some(n=>r.includes(n))}i(pe,"intersects"),exports.intersects=pe;
//# sourceMappingURL=utils.js.map
