"use strict";var i=Object.defineProperty;var o=(s,e)=>i(s,"name",{value:e,configurable:!0});const h=require("../../errors/base-error"),n=require("../../errors/connection-error");class r extends h{constructor(e){super(e);this.name="SequelizeAsyncQueueError"}}o(r,"AsyncQueueError"),exports.AsyncQueueError=r;class u{constructor(){this.previous=Promise.resolve(),this.closed=!1,this.rejectCurrent=()=>{}}close(){this.closed=!0,this.rejectCurrent(new n(new r("the connection was closed before this query could finish executing")))}enqueue(e){return new Promise((c,t)=>{this.previous=this.previous.then(()=>(this.rejectCurrent=t,this.closed?t(new n(new r("the connection was closed before this query could be executed"))):e().then(c,t)))})}}o(u,"AsyncQueue"),exports.default=u;
//# sourceMappingURL=async-queue.js.map
